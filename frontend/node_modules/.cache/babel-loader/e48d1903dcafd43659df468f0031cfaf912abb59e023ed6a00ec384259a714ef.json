{"ast":null,"code":"import React,{useState,useEffect}from'react';import Main1 from'./pages/Main1';import Main2 from'./pages/Main2';import Navbar from'./components/Navbar';import Login from'./components/login/Login';import Logout from'./components/login/Logout';import SignUp from'./components/login/SignUp';import FindAccount from'./components/login/FindAccount';import Notice from'./pages/Notice';import MemberManagement from'./components/login/MemberManagement';import XRayUpload from'./pages/XRayUpload';import Profile from'./components/login/Profile';import DiagnosisList from'./pages/DiagnosisList';import UploadHistory from'./pages/UploadHistory';import Diagnosis from'features/diagnosis/Diagnosis';import{AuthProvider}from\"app/providers\";//import BaseLayout from \"./components/layout/BaseLayout\";\n//import ProtectedRoute from \"./components/layout/ProtectedRoute\"; // 로그인 보호된 라우트\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[currentPage,setCurrentPage]=useState('main');const[currentUser,setCurrentUser]=useState(null);const[selectedXrayId,setSelectedXrayId]=useState(null);const[selectedNotice,setSelectedNotice]=useState(null);// 새로고침 시 localStorage에서 사용자 정보 복원\nuseEffect(()=>{const storedUserId=localStorage.getItem(\"userId\");const storedUserName=localStorage.getItem(\"memberName\");const storedRoleCd=localStorage.getItem(\"roleCd\");const storedEmail=localStorage.getItem(\"email\");const isLogin=localStorage.getItem(\"isLogin\");if(isLogin&&storedUserId&&storedUserName&&storedRoleCd){setCurrentUser({memberId:storedUserId,memberName:storedUserName,role:storedRoleCd,email:storedEmail});}},[]);// 첫 렌더링 시 한 번만 실행\nconst handleLogin=userData=>{setCurrentUser(userData);setCurrentPage('main');};const handleLogout=()=>{setCurrentUser(null);setCurrentPage('main');};const handleNavigate=(page,payload)=>{setCurrentPage(page);if(payload&&payload.xrayId){setSelectedXrayId(payload.xrayId);}if(payload&&payload.notice){setSelectedNotice(payload.notice);}else{setSelectedNotice(null);}};const renderPage=()=>{// --- 1. 비로그인 상태에서 보여줄 페이지 ---\nif(!currentUser){switch(currentPage){case'login':return/*#__PURE__*/_jsx(Login,{onLogin:handleLogin,onNavigate:handleNavigate});case'signup':return/*#__PURE__*/_jsx(SignUp,{onNavigate:handleNavigate});case'find-account':return/*#__PURE__*/_jsx(FindAccount,{onNavigate:handleNavigate});case'main':default:return/*#__PURE__*/_jsx(Main1,{});}}// --- 2. 로그인 상태에서 보여줄 페이지 ---  2025.10.22 jaemin role code 변경\nswitch(currentPage){case'logout':return/*#__PURE__*/_jsx(Logout,{onNavigate:handleNavigate,onLogout:handleLogout});case'notice':return/*#__PURE__*/_jsx(Notice,{currentUser:currentUser,initialNotice:selectedNotice});case'profile':return/*#__PURE__*/_jsx(Profile,{currentUser:currentUser,setCurrentUser:setCurrentUser});case'members':return currentUser.role==='A'?/*#__PURE__*/_jsx(MemberManagement,{}):/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"\\uC811\\uADFC \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});case'diagnosis':return/*#__PURE__*/_jsx(XRayUpload,{currentUser:currentUser});case'view-diagnosis':return/*#__PURE__*/_jsx(Diagnosis,{xrayId:selectedXrayId,currentUser:currentUser,onNavigate:handleNavigate});case'diagnosis-list':return currentUser.role==='D'||currentUser.role==='A'?/*#__PURE__*/_jsx(DiagnosisList,{onNavigate:handleNavigate}):/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"\\uC811\\uADFC \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});case'xray-upload':return currentUser.role==='X'?/*#__PURE__*/_jsx(XRayUpload,{currentUser:currentUser}):/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"\\uC811\\uADFC \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});case'upload-history':return currentUser.role==='X'||currentUser.role==='A'?/*#__PURE__*/_jsx(UploadHistory,{currentUser:currentUser}):/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"\\uC811\\uADFC \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});case'main':default:return/*#__PURE__*/_jsx(Main2,{currentUser:currentUser,onNavigate:handleNavigate});}};return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900 text-white min-h-screen font-sans\",children:[/*#__PURE__*/_jsx(Navbar,{currentUser:currentUser,onLogout:handleLogout,onNavigate:handleNavigate}),/*#__PURE__*/_jsx(\"main\",{className:\"container mx-auto p-4 sm:p-6 md:p-8 pt-24\",children:renderPage()})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Main1","Main2","Navbar","Login","Logout","SignUp","FindAccount","Notice","MemberManagement","XRayUpload","Profile","DiagnosisList","UploadHistory","Diagnosis","AuthProvider","jsx","_jsx","jsxs","_jsxs","App","currentPage","setCurrentPage","currentUser","setCurrentUser","selectedXrayId","setSelectedXrayId","selectedNotice","setSelectedNotice","storedUserId","localStorage","getItem","storedUserName","storedRoleCd","storedEmail","isLogin","memberId","memberName","role","email","handleLogin","userData","handleLogout","handleNavigate","page","payload","xrayId","notice","renderPage","onLogin","onNavigate","onLogout","initialNotice","className","children"],"sources":["D:/Medical AI/2nd_project_STrio/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Main1 from './pages/Main1';\r\nimport Main2 from './pages/Main2';\r\nimport Navbar from './components/Navbar';\r\nimport Login from './components/login/Login';\r\nimport Logout from './components/login/Logout';\r\nimport SignUp from './components/login/SignUp';\r\nimport FindAccount from './components/login/FindAccount';\r\nimport Notice from './pages/Notice';\r\nimport MemberManagement from './components/login/MemberManagement';\r\nimport XRayUpload from './pages/XRayUpload';\r\nimport Profile from './components/login/Profile';\r\nimport DiagnosisList from './pages/DiagnosisList';\r\nimport UploadHistory from './pages/UploadHistory';\r\nimport Diagnosis from 'features/diagnosis/Diagnosis';\r\nimport { AuthProvider } from \"app/providers\";\r\n//import BaseLayout from \"./components/layout/BaseLayout\";\r\n//import ProtectedRoute from \"./components/layout/ProtectedRoute\"; // 로그인 보호된 라우트\r\n\r\nfunction App() {\r\n    const [currentPage, setCurrentPage] = useState('main');\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [selectedXrayId, setSelectedXrayId] = useState(null);\r\n    const [selectedNotice, setSelectedNotice] = useState(null);\r\n\r\n\r\n    // 새로고침 시 localStorage에서 사용자 정보 복원\r\n    useEffect(() => {\r\n        const storedUserId = localStorage.getItem(\"userId\");\r\n        const storedUserName = localStorage.getItem(\"memberName\");\r\n        const storedRoleCd = localStorage.getItem(\"roleCd\");\r\n        const storedEmail = localStorage.getItem(\"email\");\r\n        const isLogin = localStorage.getItem(\"isLogin\");\r\n\r\n        if (isLogin && storedUserId && storedUserName && storedRoleCd) {\r\n            setCurrentUser({\r\n                memberId: storedUserId,\r\n                memberName: storedUserName,\r\n                role: storedRoleCd,\r\n                email: storedEmail,\r\n            });\r\n        }\r\n    }, []); // 첫 렌더링 시 한 번만 실행\r\n\r\n    const handleLogin = (userData) => {\r\n        setCurrentUser(userData);\r\n        setCurrentPage('main');\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        setCurrentUser(null);\r\n        setCurrentPage('main');\r\n    };\r\n\r\n    const handleNavigate = (page, payload) => {\r\n        setCurrentPage(page);\r\n        if (payload && payload.xrayId) {\r\n            setSelectedXrayId(payload.xrayId);\r\n        }\r\n        if (payload && payload.notice) {\r\n            setSelectedNotice(payload.notice);\r\n        } else {\r\n            setSelectedNotice(null);\r\n        }\r\n    };\r\n\r\n    const renderPage = () => {\r\n        // --- 1. 비로그인 상태에서 보여줄 페이지 ---\r\n        if (!currentUser) {\r\n\r\n            switch (currentPage) {\r\n                case 'login':\r\n                    return <Login onLogin={handleLogin} onNavigate={handleNavigate} />;\r\n                case 'signup':\r\n                    return <SignUp onNavigate={handleNavigate} />;\r\n                case 'find-account':\r\n                    return <FindAccount onNavigate={handleNavigate} />;\r\n                case 'main':\r\n                default:\r\n                    return <Main1 />;\r\n            }\r\n        }\r\n\r\n        // --- 2. 로그인 상태에서 보여줄 페이지 ---  2025.10.22 jaemin role code 변경\r\n        switch (currentPage) {\r\n            case 'logout':\r\n                return <Logout onNavigate={handleNavigate} onLogout={handleLogout} />;\r\n            case 'notice':\r\n                return <Notice currentUser={currentUser} initialNotice={selectedNotice} />;\r\n            case 'profile':\r\n                return <Profile currentUser={currentUser} setCurrentUser={setCurrentUser} />;\r\n            case 'members':\r\n                return currentUser.role === 'A' ? <MemberManagement /> : <h2 className=\"text-center\">접근 권한이 없습니다.</h2>;\r\n            case 'diagnosis':\r\n                return <XRayUpload currentUser={currentUser} />;\r\n            case 'view-diagnosis':\r\n                return <Diagnosis xrayId={selectedXrayId} currentUser={currentUser} onNavigate={handleNavigate} />;\r\n            case 'diagnosis-list':\r\n                return currentUser.role === 'D' || currentUser.role === 'A' ? <DiagnosisList onNavigate={handleNavigate} /> : <h2 className=\"text-center\">접근 권한이 없습니다.</h2>;\r\n            case 'xray-upload':\r\n                 return currentUser.role === 'X' ? <XRayUpload currentUser={currentUser} /> : <h2 className=\"text-center\">접근 권한이 없습니다.</h2>;\r\n            case 'upload-history':\r\n                 return currentUser.role === 'X' || currentUser.role === 'A' ? <UploadHistory currentUser={currentUser} /> : <h2 className=\"text-center\">접근 권한이 없습니다.</h2>;\r\n            case 'main':\r\n            default:\r\n                return <Main2 currentUser={currentUser} onNavigate={handleNavigate} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AuthProvider>\r\n            <div className=\"bg-gray-900 text-white min-h-screen font-sans\">\r\n                <Navbar \r\n                    currentUser={currentUser} \r\n                    onLogout={handleLogout}\r\n                    onNavigate={handleNavigate} \r\n                />\r\n                <main className=\"container mx-auto p-4 sm:p-6 md:p-8 pt-24\">\r\n                    {renderPage()}\r\n                </main>\r\n            </div>\r\n        </AuthProvider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}